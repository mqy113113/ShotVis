!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){var a=new Framework7,b=Dom7,c=(a.addView(".view-main",{dynamicNavbar:!0,domCache:!0}),function(){this.startx=0,this.starty=0,this.selected=!0,this.startselect=!1,this.throttleTouch=$.throttle(100,!0,this._onTouch)});c.prototype._onTouch=function(a){var b=this;if(this.$overlay=this.$overlay||$('<div class="kuang"></div>').appendTo(this.$page),this.startselect){a.preventDefault();var c=Math.floor(a.targetTouches[0].clientX),d=Math.floor(a.targetTouches[0].clientY),e=b.startx,f=b.starty,g=Math.abs(c-e),h=Math.abs(d-f);this.$overlay.css({left:Math.min(e,c),top:Math.min(f,d),width:g,height:h}),this.$page.find(".td").each(function(){var a=$(this),g=a.offset().left,h=a.offset().top,i=a.width(),j=a.height();b.selected?g<Math.max(e,c)&&g+i>=Math.min(e,c)&&h<=Math.max(f,d)&&h+j>Math.min(f,d)&&!a.is(".disable")?a.addClass(a.hasClass("selected")?"no-selected":"selected2"):$(this).removeClass("selected2"):g<Math.max(e,c)&&g+i>=Math.min(e,c)&&h<=Math.max(f,d)&&h+j>Math.min(f,d)&&!a.is(".disable")?a.addClass("selected"):a.removeClass("selected")})}},c.prototype.render=function(a){this.$page=$(a),this.page=Dom7(a),this.initTable(),this.operate()},c.prototype.initTable=function(){var a,b;$.ajax({url:"../data/data1.json"}).success($.proxy(function(c){this.$page.find(".table").height(c.resolution.height);var d=this;$.each(c.data,function(){a=this.box[2]-this.box[0],b=this.box[3]-this.box[1],d.$page.find(".table").append('<div class="td" style="left:'+this.box[0]+"px;top:"+this.box[1]+"px;width:"+a+"px;height:"+b+"px;line-height:"+b+'px;">'+this.value+"</div>")})},this))},c.prototype.addlist=function(a){var b=this,c=a;if(c){var d='<div class="list-block"><ul>',e=[];if($.each(b.$page.find(".td.selected"),function(){var a=$(this).text(),b=a.search(/\D/g);0>b?(num=a,units=""):(num=a.slice(0,b),units=a.slice(b)),e.indexOf(units)>-1||""==units?console.log("0"):e.push(units),d+='<li class="swipeout"><div class="swipeout-content item-content">'+a.match(/\d+/g)[0]+'</div><input type="text" value="'+a.match(/\d+/g)[0]+'" class=""><div class="swipeout-actions-right"><a href="#" class=" swipeout-delete delete">删除</a></div></li>'}),d+="</ul></div>",e.length>0){var g='<select name="" class="">';for(i=0;i<e.length;i++)g+='<option value ="'+e[i]+'">'+e[i]+"</option>";g+="</select>",d='<div class="content-block-title"><div class="lable '+c+'">'+c+'&nbsp;&nbsp;单位：</div><div class="select">'+g+"</div></div>"+d}else d='<div class="content-block-title"><div class="lable '+c+'">'+c+"</div> </div>"+d;b.$page.find(".selected").removeClass("selected").addClass("disable"),b.$page.find(".kuang").removeClass("kuang"),f.initList(c,d)}},c.prototype.operate=function(){var b=this;this.page.find(".content-block-inner").on(a.touchEvents.start,$.proxy(function(a){this.startselect&&(this.selected=this.$page.find(".content-block-inner .selected")[0],b.startx=Math.floor(a.targetTouches[0].clientX),b.starty=Math.floor(a.targetTouches[0].clientY),this.throttleTouch(a))},this)),this.page.find(".content-block-inner").on(a.touchEvents.move,function(a){b.throttleTouch(a)}),this.page.find(".content-block-inner").on(a.touchEvents.end,$.proxy(function(){this.startselect&&(this.$overlay.remove(),this.$overlay=null,this.$page.find(".no-selected").removeClass("selected").removeClass("no-selected"),this.$page.find(".selected2").addClass("selected").removeClass("selected2"))},this)),this.$page.find(".toolbar").on("click","[name='clearselect']",$.proxy(function(){this.$page.find(".selected").removeClass("selected")},this)),this.$page.find(".prompt-ok").on("click",$.proxy(function(){startselect=!1,$(this).siblings().removeClass("selected"),a.prompt("请输入该属性名",[""],function(c){a.alert('该属性名是 "'+c+'",确定后点击右上角预览可看到列表',[""],$.proxy(b.addlist(c),this))})},this)),this.$page.find(".startSelect").on("click",function(){1==b.startselect?(b.startselect=!1,$(this).removeClass("selected")):(b.startselect=!0,$(this).addClass("selected"))})};var d=new c;d.render(".page-index");var e=function(){this.option={title:{text:"ShotVis",subtext:"纯属虚构"},tooltip:{trigger:"axis"},legend:{data:["yname"]},toolbox:{show:!1,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}],yAxis:[{type:"value"}],series:[{name:"蒸发量",type:"line",data:["1111","2222","3333","44444"]}]}};e.prototype.render=function(a){this.$page=$(a),this.page=Dom7(a),this.operate()},e.prototype.initList=function(a,b){this.$page.find(".xaxis").append('<option value="'+a+'" >'+a+"</option>"),this.$page.find(".yaxis").append('<option value="'+a+'">'+a+"</option>"),this.$page.find("#serialize").append(b)},e.prototype.operate=function(){b(document).on("pageAfterAnimation",'.page[data-page="list"]',function(){$(a.mainView.activePage.container).on("click",function(a){var b=$(a.target);if(b.parents(".swipeout").length>0||b.hasClass("swipeout")){var c=b.hasClass("swipeout")?b:b.parents(".swipeout");if(!c.is(".editing"))if($(this).find(".editing").length>0){var d=$(this).find(".editing input").val();$(this).find(".editing .swipeout-content").text(d),$(this).find(".editing").removeClass("editing"),c.addClass("editing"),c.find("input").focus()}else c.addClass("editing"),c.find("input").focus()}else{var d=$(this).find(".editing input").val();$(this).find(".editing .swipeout-content").text(d),$(this).find(".editing").removeClass("editing")}})}),this.$page.find("#generate").on("click",$.proxy(function(){var a=this.$page.find(".selecty").find(".item-after").text(),b=this.$page.find(".selectx").find(".item-after").text(),c=this.$page.find("."+b).parent(".content-block-title").next(".list-block").find(".item-content"),d=this.$page.find("."+a).parent(".content-block-title").next(".list-block").find(".item-content"),e=[],f=[];c.each(function(){e.push($(this).text())}),d.each(function(){f.push($(this).text())}),this.option.legend.data=[a],this.option.xAxis[0].data=e,this.option.series[0].data=f,this.option.series[0].name=a,this.option.title.subtext="折线图",h.initcharts(this.option)},this)),b(document).on("pageAfterAnimation",'.page[data-page="charts"]',$.proxy(function(){h.initcharts(this.option)},this))};var f=new e;f.render(".page-list");var g=function(){this.myChart};g.prototype.render=function(a){this.$page=$(a),this.page=Dom7(a),this.operate()},g.prototype.initcharts=function(a){this.option=a,this.myChart=echarts.init(document.getElementById("main")),this.myChart.setOption(this.option),setTimeout($.proxy(this.generateImage,this),1e3)},g.prototype.generateImage=function(){var b=this,c=new Image;c.src="../img/white.jpg";var d=new Image;d.src=this.myChart.getDataURL(),$(a.mainView.activePage.container).find(".page-content").append('<canvas id="canvas" style="display:none">');var e=$("#canvas")[0].getContext("2d"),f=new Image;f.src="../img/bg.jpg",$(f).load(function(){var g=window.screen.width,h=f.width,i=d.width,j=Math.floor(f.height*g/h),k=Math.floor(250*d.height/i),l=Math.max(j,k+100);$("#canvas").attr({height:2*l,width:2*g}),e.drawImage(c,0,0,2*g,2*l),e.drawImage(f,0,0,2*g,2*j),e.drawImage(d,80,120,500,2*k),$("#canvas").css({height:l,width:g});var m=$("#canvas")[0].toDataURL("image/png");0==b.$page.find(".charts").length?$(a.mainView.activePage.container).find(".page-content").append("<img src="+m+' class="charts" >'):(b.$page.find(".charts").remove(),$(a.mainView.activePage.container).find(".page-content").append("<img src="+m+' class="charts" >'))})},g.prototype.getUrl=function(a){$.ajax({type:"post",url:"saveBase64.php",data:{imgBase64:a}}).success(function(a){$(".page-charts").find(".page-content").append("<img src="+a+' class="charts" >')})},g.prototype.operate=function(){b(".shareTo").on("click",function(){var b=[{text:"To Facebook",bold:!0,onClick:function(){$(".facebook").click()}},{text:"To SinaWeibo",bold:!0,onClick:function(){$(".jtico_tsina").click()}},{text:"To QQZONE",onClick:function(){$(".jtico_qzone").click()}},{text:"Cancel",color:"red"}];a.actions(b)}),this.$page.find(".bar").on("click",$.proxy(function(){this.option.series[0].type="bar",this.initcharts(this.option)},this)),this.$page.find(".line").on("click",$.proxy(function(){this.option.series[0].type="line",this.initcharts(this.option)},this))};var h=new g;h.render(".page-charts")},{}]},{},[1]);